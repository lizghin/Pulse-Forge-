{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createPlayer = createPlayer;\n  exports.updatePlayer = updatePlayer;\n  exports.damagePlayer = damagePlayer;\n  // Player system\n\n  let playerIdCounter = 0;\n  function createPlayer(config) {\n    return {\n      id: `player_${++playerIdCounter}`,\n      position: {\n        x: config.screenWidth / 2,\n        y: 100\n      },\n      velocity: {\n        x: 0,\n        y: 0\n      },\n      radius: 20,\n      active: true,\n      charge: 0,\n      maxCharge: 1,\n      chargeSpeed: 1.5,\n      isCharging: false,\n      phaseActive: false,\n      phaseTimer: 0,\n      phaseDuration: 0.8,\n      hp: 3,\n      maxHp: 3,\n      multiplier: 1,\n      heat: 0,\n      dashPower: 400,\n      magnetRange: 150,\n      invincible: false,\n      invincibleTimer: 0,\n      // Mastery tracking\n      lowHpTime: 0,\n      lastPulseTime: 0\n    };\n  }\n  function updatePlayer(player, dt, config) {\n    // Auto-scroll upward\n    const baseSpeed = 100;\n    const chargeSlowdown = player.isCharging ? 0.6 : 1;\n    player.velocity.y = baseSpeed * chargeSlowdown;\n\n    // Apply velocity\n    player.position.y += player.velocity.y * dt;\n\n    // Horizontal movement friction\n    player.velocity.x *= 0.95;\n    player.position.x += player.velocity.x * dt;\n\n    // Keep player in bounds horizontally\n    player.position.x = Math.max(player.radius, Math.min(config.screenWidth - player.radius, player.position.x));\n\n    // Update charge\n    if (player.isCharging) {\n      player.charge = Math.min(player.maxCharge, player.charge + player.chargeSpeed * dt);\n    }\n\n    // Update phase timer\n    if (player.phaseActive) {\n      player.phaseTimer -= dt;\n      if (player.phaseTimer <= 0) {\n        player.phaseActive = false;\n      }\n    }\n\n    // Update invincibility\n    if (player.invincible) {\n      player.invincibleTimer -= dt;\n      if (player.invincibleTimer <= 0) {\n        player.invincible = false;\n      }\n    }\n\n    // Reduce heat over time\n    player.heat = Math.max(0, player.heat - 0.1 * dt);\n\n    // Track low HP time\n    if (player.hp === 1) {\n      player.lowHpTime += dt;\n    }\n  }\n  function damagePlayer(player, damage, store) {\n    if (player.invincible) return;\n    player.hp -= damage;\n    player.invincible = true;\n    player.invincibleTimer = 1.5;\n    if (player.hp <= 0) {\n      store.setPhase('ended');\n      store.endRun(); // Save mastery progress\n    }\n  }\n});","lineCount":101,"map":[[7,2,7,0,"exports"],[7,9,7,0],[7,10,7,0,"createPlayer"],[7,22,7,0],[7,25,7,0,"createPlayer"],[7,37,7,0],[8,2,35,0,"exports"],[8,9,35,0],[8,10,35,0,"updatePlayer"],[8,22,35,0],[8,25,35,0,"updatePlayer"],[8,37,35,0],[9,2,81,0,"exports"],[9,9,81,0],[9,10,81,0,"damagePlayer"],[9,22,81,0],[9,25,81,0,"damagePlayer"],[9,37,81,0],[10,2,1,0],[12,2,5,0],[12,6,5,4,"playerIdCounter"],[12,21,5,19],[12,24,5,22],[12,25,5,23],[13,2,7,7],[13,11,7,16,"createPlayer"],[13,23,7,28,"createPlayer"],[13,24,7,29,"config"],[13,30,7,47],[13,32,7,57],[14,4,8,2],[14,11,8,9],[15,6,9,4,"id"],[15,8,9,6],[15,10,9,8],[15,20,9,18],[15,22,9,20,"playerIdCounter"],[15,37,9,35],[15,39,9,37],[16,6,10,4,"position"],[16,14,10,12],[16,16,10,14],[17,8,10,16,"x"],[17,9,10,17],[17,11,10,19,"config"],[17,17,10,25],[17,18,10,26,"screenWidth"],[17,29,10,37],[17,32,10,40],[17,33,10,41],[18,8,10,43,"y"],[18,9,10,44],[18,11,10,46],[19,6,10,50],[19,7,10,51],[20,6,11,4,"velocity"],[20,14,11,12],[20,16,11,14],[21,8,11,16,"x"],[21,9,11,17],[21,11,11,19],[21,12,11,20],[22,8,11,22,"y"],[22,9,11,23],[22,11,11,25],[23,6,11,27],[23,7,11,28],[24,6,12,4,"radius"],[24,12,12,10],[24,14,12,12],[24,16,12,14],[25,6,13,4,"active"],[25,12,13,10],[25,14,13,12],[25,18,13,16],[26,6,14,4,"charge"],[26,12,14,10],[26,14,14,12],[26,15,14,13],[27,6,15,4,"maxCharge"],[27,15,15,13],[27,17,15,15],[27,18,15,16],[28,6,16,4,"chargeSpeed"],[28,17,16,15],[28,19,16,17],[28,22,16,20],[29,6,17,4,"isCharging"],[29,16,17,14],[29,18,17,16],[29,23,17,21],[30,6,18,4,"phaseActive"],[30,17,18,15],[30,19,18,17],[30,24,18,22],[31,6,19,4,"phaseTimer"],[31,16,19,14],[31,18,19,16],[31,19,19,17],[32,6,20,4,"phaseDuration"],[32,19,20,17],[32,21,20,19],[32,24,20,22],[33,6,21,4,"hp"],[33,8,21,6],[33,10,21,8],[33,11,21,9],[34,6,22,4,"maxHp"],[34,11,22,9],[34,13,22,11],[34,14,22,12],[35,6,23,4,"multiplier"],[35,16,23,14],[35,18,23,16],[35,19,23,17],[36,6,24,4,"heat"],[36,10,24,8],[36,12,24,10],[36,13,24,11],[37,6,25,4,"dashPower"],[37,15,25,13],[37,17,25,15],[37,20,25,18],[38,6,26,4,"magnetRange"],[38,17,26,15],[38,19,26,17],[38,22,26,20],[39,6,27,4,"invincible"],[39,16,27,14],[39,18,27,16],[39,23,27,21],[40,6,28,4,"invincibleTimer"],[40,21,28,19],[40,23,28,21],[40,24,28,22],[41,6,29,4],[42,6,30,4,"lowHpTime"],[42,15,30,13],[42,17,30,15],[42,18,30,16],[43,6,31,4,"lastPulseTime"],[43,19,31,17],[43,21,31,19],[44,4,32,2],[44,5,32,3],[45,2,33,0],[46,2,35,7],[46,11,35,16,"updatePlayer"],[46,23,35,28,"updatePlayer"],[46,24,35,29,"player"],[46,30,35,43],[46,32,35,45,"dt"],[46,34,35,55],[46,36,35,57,"config"],[46,42,35,75],[46,44,35,77],[47,4,36,2],[48,4,37,2],[48,10,37,8,"baseSpeed"],[48,19,37,17],[48,22,37,20],[48,25,37,23],[49,4,38,2],[49,10,38,8,"chargeSlowdown"],[49,24,38,22],[49,27,38,25,"player"],[49,33,38,31],[49,34,38,32,"isCharging"],[49,44,38,42],[49,47,38,45],[49,50,38,48],[49,53,38,51],[49,54,38,52],[50,4,39,2,"player"],[50,10,39,8],[50,11,39,9,"velocity"],[50,19,39,17],[50,20,39,18,"y"],[50,21,39,19],[50,24,39,22,"baseSpeed"],[50,33,39,31],[50,36,39,34,"chargeSlowdown"],[50,50,39,48],[52,4,41,2],[53,4,42,2,"player"],[53,10,42,8],[53,11,42,9,"position"],[53,19,42,17],[53,20,42,18,"y"],[53,21,42,19],[53,25,42,23,"player"],[53,31,42,29],[53,32,42,30,"velocity"],[53,40,42,38],[53,41,42,39,"y"],[53,42,42,40],[53,45,42,43,"dt"],[53,47,42,45],[55,4,44,2],[56,4,45,2,"player"],[56,10,45,8],[56,11,45,9,"velocity"],[56,19,45,17],[56,20,45,18,"x"],[56,21,45,19],[56,25,45,23],[56,29,45,27],[57,4,46,2,"player"],[57,10,46,8],[57,11,46,9,"position"],[57,19,46,17],[57,20,46,18,"x"],[57,21,46,19],[57,25,46,23,"player"],[57,31,46,29],[57,32,46,30,"velocity"],[57,40,46,38],[57,41,46,39,"x"],[57,42,46,40],[57,45,46,43,"dt"],[57,47,46,45],[59,4,48,2],[60,4,49,2,"player"],[60,10,49,8],[60,11,49,9,"position"],[60,19,49,17],[60,20,49,18,"x"],[60,21,49,19],[60,24,49,22,"Math"],[60,28,49,26],[60,29,49,27,"max"],[60,32,49,30],[60,33,49,31,"player"],[60,39,49,37],[60,40,49,38,"radius"],[60,46,49,44],[60,48,49,46,"Math"],[60,52,49,50],[60,53,49,51,"min"],[60,56,49,54],[60,57,49,55,"config"],[60,63,49,61],[60,64,49,62,"screenWidth"],[60,75,49,73],[60,78,49,76,"player"],[60,84,49,82],[60,85,49,83,"radius"],[60,91,49,89],[60,93,49,91,"player"],[60,99,49,97],[60,100,49,98,"position"],[60,108,49,106],[60,109,49,107,"x"],[60,110,49,108],[60,111,49,109],[60,112,49,110],[62,4,51,2],[63,4,52,2],[63,8,52,6,"player"],[63,14,52,12],[63,15,52,13,"isCharging"],[63,25,52,23],[63,27,52,25],[64,6,53,4,"player"],[64,12,53,10],[64,13,53,11,"charge"],[64,19,53,17],[64,22,53,20,"Math"],[64,26,53,24],[64,27,53,25,"min"],[64,30,53,28],[64,31,53,29,"player"],[64,37,53,35],[64,38,53,36,"maxCharge"],[64,47,53,45],[64,49,53,47,"player"],[64,55,53,53],[64,56,53,54,"charge"],[64,62,53,60],[64,65,53,63,"player"],[64,71,53,69],[64,72,53,70,"chargeSpeed"],[64,83,53,81],[64,86,53,84,"dt"],[64,88,53,86],[64,89,53,87],[65,4,54,2],[67,4,56,2],[68,4,57,2],[68,8,57,6,"player"],[68,14,57,12],[68,15,57,13,"phaseActive"],[68,26,57,24],[68,28,57,26],[69,6,58,4,"player"],[69,12,58,10],[69,13,58,11,"phaseTimer"],[69,23,58,21],[69,27,58,25,"dt"],[69,29,58,27],[70,6,59,4],[70,10,59,8,"player"],[70,16,59,14],[70,17,59,15,"phaseTimer"],[70,27,59,25],[70,31,59,29],[70,32,59,30],[70,34,59,32],[71,8,60,6,"player"],[71,14,60,12],[71,15,60,13,"phaseActive"],[71,26,60,24],[71,29,60,27],[71,34,60,32],[72,6,61,4],[73,4,62,2],[75,4,64,2],[76,4,65,2],[76,8,65,6,"player"],[76,14,65,12],[76,15,65,13,"invincible"],[76,25,65,23],[76,27,65,25],[77,6,66,4,"player"],[77,12,66,10],[77,13,66,11,"invincibleTimer"],[77,28,66,26],[77,32,66,30,"dt"],[77,34,66,32],[78,6,67,4],[78,10,67,8,"player"],[78,16,67,14],[78,17,67,15,"invincibleTimer"],[78,32,67,30],[78,36,67,34],[78,37,67,35],[78,39,67,37],[79,8,68,6,"player"],[79,14,68,12],[79,15,68,13,"invincible"],[79,25,68,23],[79,28,68,26],[79,33,68,31],[80,6,69,4],[81,4,70,2],[83,4,72,2],[84,4,73,2,"player"],[84,10,73,8],[84,11,73,9,"heat"],[84,15,73,13],[84,18,73,16,"Math"],[84,22,73,20],[84,23,73,21,"max"],[84,26,73,24],[84,27,73,25],[84,28,73,26],[84,30,73,28,"player"],[84,36,73,34],[84,37,73,35,"heat"],[84,41,73,39],[84,44,73,42],[84,47,73,45],[84,50,73,48,"dt"],[84,52,73,50],[84,53,73,51],[86,4,75,2],[87,4,76,2],[87,8,76,6,"player"],[87,14,76,12],[87,15,76,13,"hp"],[87,17,76,15],[87,22,76,20],[87,23,76,21],[87,25,76,23],[88,6,77,4,"player"],[88,12,77,10],[88,13,77,11,"lowHpTime"],[88,22,77,20],[88,26,77,24,"dt"],[88,28,77,26],[89,4,78,2],[90,2,79,0],[91,2,81,7],[91,11,81,16,"damagePlayer"],[91,23,81,28,"damagePlayer"],[91,24,81,29,"player"],[91,30,81,43],[91,32,81,45,"damage"],[91,38,81,59],[91,40,81,61,"store"],[91,45,81,71],[91,47,81,73],[92,4,82,2],[92,8,82,6,"player"],[92,14,82,12],[92,15,82,13,"invincible"],[92,25,82,23],[92,27,82,25],[93,4,84,2,"player"],[93,10,84,8],[93,11,84,9,"hp"],[93,13,84,11],[93,17,84,15,"damage"],[93,23,84,21],[94,4,85,2,"player"],[94,10,85,8],[94,11,85,9,"invincible"],[94,21,85,19],[94,24,85,22],[94,28,85,26],[95,4,86,2,"player"],[95,10,86,8],[95,11,86,9,"invincibleTimer"],[95,26,86,24],[95,29,86,27],[95,32,86,30],[96,4,88,2],[96,8,88,6,"player"],[96,14,88,12],[96,15,88,13,"hp"],[96,17,88,15],[96,21,88,19],[96,22,88,20],[96,24,88,22],[97,6,89,4,"store"],[97,11,89,9],[97,12,89,10,"setPhase"],[97,20,89,18],[97,21,89,19],[97,28,89,26],[97,29,89,27],[98,6,90,4,"store"],[98,11,90,9],[98,12,90,10,"endRun"],[98,18,90,16],[98,19,90,17],[98,20,90,18],[98,21,90,19],[98,22,90,20],[99,4,91,2],[100,2,92,0],[101,0,92,1],[101,3]],"functionMap":{"names":["<global>","createPlayer","updatePlayer","damagePlayer"],"mappings":"AAA;OCM;CD0B;OEE;CF4C;OGE;CHW"},"hasCjsExports":false},"type":"js/module"}]}