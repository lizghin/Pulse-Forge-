{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":19},"end":{"line":2,"column":53,"index":72}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../Skia","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":73},"end":{"line":3,"column":31,"index":104}}],"key":"5eRJ3Y/mp/EEiynYa3WwzXcSMXc=","exportNames":["*"],"imports":1}},{"name":"../types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":105},"end":{"line":4,"column":37,"index":142}}],"key":"SiqkZ9nARqNkdXfcIWbBgsKp5Yo=","exportNames":["*"],"imports":1}},{"name":"../../Platform","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":143},"end":{"line":5,"column":42,"index":185}}],"key":"AXHAxFjlDdeq1JxYZnWn+aHYhYU=","exportNames":["*"],"imports":1}},{"name":"./Typeface","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":186},"end":{"line":6,"column":41,"index":227}}],"key":"T7PcoThZRvZLszyHdGWlQbNTLZw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useFont\", {\n    enumerable: true,\n    get: function () {\n      return useFont;\n    }\n  });\n  Object.defineProperty(exports, \"matchFont\", {\n    enumerable: true,\n    get: function () {\n      return matchFont;\n    }\n  });\n  Object.defineProperty(exports, \"listFontFamilies\", {\n    enumerable: true,\n    get: function () {\n      return listFontFamilies;\n    }\n  });\n  Object.defineProperty(exports, \"useFonts\", {\n    enumerable: true,\n    get: function () {\n      return useFonts;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _Skia = require(_dependencyMap[1], \"../Skia\");\n  var _types = require(_dependencyMap[2], \"../types\");\n  var _Platform = require(_dependencyMap[3], \"../../Platform\");\n  var _Typeface = require(_dependencyMap[4], \"./Typeface\");\n  /*global SkiaApi*/\n\n  const defaultFontSize = 14;\n\n  /**\n   * Returns a Skia Font object\n   * */\n  const useFont = (font, size = defaultFontSize, onError) => {\n    const typeface = (0, _Typeface.useTypeface)(font, onError);\n    return (0, _react.useMemo)(() => {\n      if (typeface) {\n        return _Skia.Skia.Font(typeface, size);\n      } else {\n        return null;\n      }\n    }, [size, typeface]);\n  };\n  const defaultFontStyle = {\n    fontFamily: \"System\",\n    fontSize: defaultFontSize,\n    fontStyle: \"normal\",\n    fontWeight: \"normal\"\n  };\n  const slant = s => {\n    if (s === \"italic\") {\n      return _types.FontSlant.Italic;\n    } else if (s === \"oblique\") {\n      return _types.FontSlant.Oblique;\n    } else {\n      return _types.FontSlant.Upright;\n    }\n  };\n  const weight = fontWeight => {\n    switch (fontWeight) {\n      case \"normal\":\n        return 400;\n      case \"bold\":\n        return 700;\n      default:\n        return parseInt(fontWeight, 10);\n    }\n  };\n  const matchFont = (inputStyle = {}, fontMgr = _Skia.Skia.FontMgr.System()) => {\n    const fontStyle = Object.assign({}, defaultFontStyle, inputStyle);\n    const style = {\n      weight: weight(fontStyle.fontWeight),\n      width: 5,\n      slant: slant(fontStyle.fontStyle)\n    };\n    const typeface = fontMgr.matchFamilyStyle(fontStyle.fontFamily, style);\n    return _Skia.Skia.Font(typeface, fontStyle.fontSize);\n  };\n  const listFontFamilies = (fontMgr = _Skia.Skia.FontMgr.System()) => {\n    const families = new Set();\n    for (let i = 0; i < fontMgr.countFamilies(); i++) {\n      families.add(fontMgr.getFamilyName(i));\n    }\n    return Array.from(families);\n  };\n  const loadTypefaces = typefacesToLoad => {\n    const promises = Object.keys(typefacesToLoad).flatMap(familyName => {\n      return typefacesToLoad[familyName].map(typefaceToLoad => {\n        return _Skia.Skia.Data.fromURI(_Platform.Platform.resolveAsset(typefaceToLoad)).then(data => {\n          const tf = _Skia.Skia.Typeface.MakeFreeTypeFaceFromData(data);\n          if (tf === null) {\n            throw new Error(`Couldn't create typeface for ${familyName}`);\n          }\n          return [familyName, tf];\n        });\n      });\n    });\n    return Promise.all(promises);\n  };\n  const useFonts = sources => {\n    const [fontMgr, setFontMgr] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      loadTypefaces(sources).then(result => {\n        const fMgr = _Skia.Skia.TypefaceFontProvider.Make();\n        result.forEach(([familyName, typeface]) => {\n          fMgr.registerFont(typeface, familyName);\n        });\n        setFontMgr(fMgr);\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return fontMgr;\n  };\n});","lineCount":123,"map":[[7,2,12,0,"Object"],[7,8,12,0],[7,9,12,0,"defineProperty"],[7,23,12,0],[7,24,12,0,"exports"],[7,31,12,0],[8,4,12,0,"enumerable"],[8,14,12,0],[9,4,12,0,"get"],[9,7,12,0],[9,18,12,0,"get"],[9,19,12,0],[10,6,12,0],[10,13,12,0,"useFont"],[10,20,12,0],[11,4,12,0],[12,2,12,0],[13,2,47,0,"Object"],[13,8,47,0],[13,9,47,0,"defineProperty"],[13,23,47,0],[13,24,47,0,"exports"],[13,31,47,0],[14,4,47,0,"enumerable"],[14,14,47,0],[15,4,47,0,"get"],[15,7,47,0],[15,18,47,0,"get"],[15,19,47,0],[16,6,47,0],[16,13,47,0,"matchFont"],[16,22,47,0],[17,4,47,0],[18,2,47,0],[19,2,60,0,"Object"],[19,8,60,0],[19,9,60,0,"defineProperty"],[19,23,60,0],[19,24,60,0,"exports"],[19,31,60,0],[20,4,60,0,"enumerable"],[20,14,60,0],[21,4,60,0,"get"],[21,7,60,0],[21,18,60,0,"get"],[21,19,60,0],[22,6,60,0],[22,13,60,0,"listFontFamilies"],[22,29,60,0],[23,4,60,0],[24,2,60,0],[25,2,81,0,"Object"],[25,8,81,0],[25,9,81,0,"defineProperty"],[25,23,81,0],[25,24,81,0,"exports"],[25,31,81,0],[26,4,81,0,"enumerable"],[26,14,81,0],[27,4,81,0,"get"],[27,7,81,0],[27,18,81,0,"get"],[27,19,81,0],[28,6,81,0],[28,13,81,0,"useFonts"],[28,21,81,0],[29,4,81,0],[30,2,81,0],[31,2,2,0],[31,6,2,0,"_react"],[31,12,2,0],[31,15,2,0,"require"],[31,22,2,0],[31,23,2,0,"_dependencyMap"],[31,37,2,0],[32,2,3,0],[32,6,3,0,"_Skia"],[32,11,3,0],[32,14,3,0,"require"],[32,21,3,0],[32,22,3,0,"_dependencyMap"],[32,36,3,0],[33,2,4,0],[33,6,4,0,"_types"],[33,12,4,0],[33,15,4,0,"require"],[33,22,4,0],[33,23,4,0,"_dependencyMap"],[33,37,4,0],[34,2,5,0],[34,6,5,0,"_Platform"],[34,15,5,0],[34,18,5,0,"require"],[34,25,5,0],[34,26,5,0,"_dependencyMap"],[34,40,5,0],[35,2,6,0],[35,6,6,0,"_Typeface"],[35,15,6,0],[35,18,6,0,"require"],[35,25,6,0],[35,26,6,0,"_dependencyMap"],[35,40,6,0],[36,2,1,0],[38,2,7,0],[38,8,7,6,"defaultFontSize"],[38,23,7,21],[38,26,7,24],[38,28,7,26],[40,2,9,0],[41,0,10,0],[42,0,11,0],[43,2,12,7],[43,8,12,13,"useFont"],[43,15,12,20],[43,18,12,23,"useFont"],[43,19,12,24,"font"],[43,23,12,28],[43,25,12,30,"size"],[43,29,12,34],[43,32,12,37,"defaultFontSize"],[43,47,12,52],[43,49,12,54,"onError"],[43,56,12,61],[43,61,12,66],[44,4,13,2],[44,10,13,8,"typeface"],[44,18,13,16],[44,21,13,19],[44,25,13,19,"useTypeface"],[44,34,13,30],[44,35,13,30,"useTypeface"],[44,46,13,30],[44,48,13,31,"font"],[44,52,13,35],[44,54,13,37,"onError"],[44,61,13,44],[44,62,13,45],[45,4,14,2],[45,11,14,9],[45,15,14,9,"useMemo"],[45,21,14,16],[45,22,14,16,"useMemo"],[45,29,14,16],[45,31,14,17],[45,37,14,23],[46,6,15,4],[46,10,15,8,"typeface"],[46,18,15,16],[46,20,15,18],[47,8,16,6],[47,15,16,13,"Skia"],[47,20,16,17],[47,21,16,17,"Skia"],[47,25,16,17],[47,26,16,18,"Font"],[47,30,16,22],[47,31,16,23,"typeface"],[47,39,16,31],[47,41,16,33,"size"],[47,45,16,37],[47,46,16,38],[48,6,17,4],[48,7,17,5],[48,13,17,11],[49,8,18,6],[49,15,18,13],[49,19,18,17],[50,6,19,4],[51,4,20,2],[51,5,20,3],[51,7,20,5],[51,8,20,6,"size"],[51,12,20,10],[51,14,20,12,"typeface"],[51,22,20,20],[51,23,20,21],[51,24,20,22],[52,2,21,0],[52,3,21,1],[53,2,22,0],[53,8,22,6,"defaultFontStyle"],[53,24,22,22],[53,27,22,25],[54,4,23,2,"fontFamily"],[54,14,23,12],[54,16,23,14],[54,24,23,22],[55,4,24,2,"fontSize"],[55,12,24,10],[55,14,24,12,"defaultFontSize"],[55,29,24,27],[56,4,25,2,"fontStyle"],[56,13,25,11],[56,15,25,13],[56,23,25,21],[57,4,26,2,"fontWeight"],[57,14,26,12],[57,16,26,14],[58,2,27,0],[58,3,27,1],[59,2,28,0],[59,8,28,6,"slant"],[59,13,28,11],[59,16,28,14,"s"],[59,17,28,15],[59,21,28,19],[60,4,29,2],[60,8,29,6,"s"],[60,9,29,7],[60,14,29,12],[60,22,29,20],[60,24,29,22],[61,6,30,4],[61,13,30,11,"FontSlant"],[61,19,30,20],[61,20,30,20,"FontSlant"],[61,29,30,20],[61,30,30,21,"Italic"],[61,36,30,27],[62,4,31,2],[62,5,31,3],[62,11,31,9],[62,15,31,13,"s"],[62,16,31,14],[62,21,31,19],[62,30,31,28],[62,32,31,30],[63,6,32,4],[63,13,32,11,"FontSlant"],[63,19,32,20],[63,20,32,20,"FontSlant"],[63,29,32,20],[63,30,32,21,"Oblique"],[63,37,32,28],[64,4,33,2],[64,5,33,3],[64,11,33,9],[65,6,34,4],[65,13,34,11,"FontSlant"],[65,19,34,20],[65,20,34,20,"FontSlant"],[65,29,34,20],[65,30,34,21,"Upright"],[65,37,34,28],[66,4,35,2],[67,2,36,0],[67,3,36,1],[68,2,37,0],[68,8,37,6,"weight"],[68,14,37,12],[68,17,37,15,"fontWeight"],[68,27,37,25],[68,31,37,29],[69,4,38,2],[69,12,38,10,"fontWeight"],[69,22,38,20],[70,6,39,4],[70,11,39,9],[70,19,39,17],[71,8,40,6],[71,15,40,13],[71,18,40,16],[72,6,41,4],[72,11,41,9],[72,17,41,15],[73,8,42,6],[73,15,42,13],[73,18,42,16],[74,6,43,4],[75,8,44,6],[75,15,44,13,"parseInt"],[75,23,44,21],[75,24,44,22,"fontWeight"],[75,34,44,32],[75,36,44,34],[75,38,44,36],[75,39,44,37],[76,4,45,2],[77,2,46,0],[77,3,46,1],[78,2,47,7],[78,8,47,13,"matchFont"],[78,17,47,22],[78,20,47,25,"matchFont"],[78,21,47,26,"inputStyle"],[78,31,47,36],[78,34,47,39],[78,35,47,40],[78,36,47,41],[78,38,47,43,"fontMgr"],[78,45,47,50],[78,48,47,53,"Skia"],[78,53,47,57],[78,54,47,57,"Skia"],[78,58,47,57],[78,59,47,58,"FontMgr"],[78,66,47,65],[78,67,47,66,"System"],[78,73,47,72],[78,74,47,73],[78,75,47,74],[78,80,47,79],[79,4,48,2],[79,10,48,8,"fontStyle"],[79,19,48,17],[79,22,48,17,"Object"],[79,28,48,17],[79,29,48,17,"assign"],[79,35,48,17],[79,40,49,7,"defaultFontStyle"],[79,56,49,23],[79,58,50,7,"inputStyle"],[79,68,50,17],[79,69,51,3],[80,4,52,2],[80,10,52,8,"style"],[80,15,52,13],[80,18,52,16],[81,6,53,4,"weight"],[81,12,53,10],[81,14,53,12,"weight"],[81,20,53,18],[81,21,53,19,"fontStyle"],[81,30,53,28],[81,31,53,29,"fontWeight"],[81,41,53,39],[81,42,53,40],[82,6,54,4,"width"],[82,11,54,9],[82,13,54,11],[82,14,54,12],[83,6,55,4,"slant"],[83,11,55,9],[83,13,55,11,"slant"],[83,18,55,16],[83,19,55,17,"fontStyle"],[83,28,55,26],[83,29,55,27,"fontStyle"],[83,38,55,36],[84,4,56,2],[84,5,56,3],[85,4,57,2],[85,10,57,8,"typeface"],[85,18,57,16],[85,21,57,19,"fontMgr"],[85,28,57,26],[85,29,57,27,"matchFamilyStyle"],[85,45,57,43],[85,46,57,44,"fontStyle"],[85,55,57,53],[85,56,57,54,"fontFamily"],[85,66,57,64],[85,68,57,66,"style"],[85,73,57,71],[85,74,57,72],[86,4,58,2],[86,11,58,9,"Skia"],[86,16,58,13],[86,17,58,13,"Skia"],[86,21,58,13],[86,22,58,14,"Font"],[86,26,58,18],[86,27,58,19,"typeface"],[86,35,58,27],[86,37,58,29,"fontStyle"],[86,46,58,38],[86,47,58,39,"fontSize"],[86,55,58,47],[86,56,58,48],[87,2,59,0],[87,3,59,1],[88,2,60,7],[88,8,60,13,"listFontFamilies"],[88,24,60,29],[88,27,60,32,"listFontFamilies"],[88,28,60,33,"fontMgr"],[88,35,60,40],[88,38,60,43,"Skia"],[88,43,60,47],[88,44,60,47,"Skia"],[88,48,60,47],[88,49,60,48,"FontMgr"],[88,56,60,55],[88,57,60,56,"System"],[88,63,60,62],[88,64,60,63],[88,65,60,64],[88,70,60,69],[89,4,61,2],[89,10,61,8,"families"],[89,18,61,16],[89,21,61,19],[89,25,61,23,"Set"],[89,28,61,26],[89,29,61,27],[89,30,61,28],[90,4,62,2],[90,9,62,7],[90,13,62,11,"i"],[90,14,62,12],[90,17,62,15],[90,18,62,16],[90,20,62,18,"i"],[90,21,62,19],[90,24,62,22,"fontMgr"],[90,31,62,29],[90,32,62,30,"countFamilies"],[90,45,62,43],[90,46,62,44],[90,47,62,45],[90,49,62,47,"i"],[90,50,62,48],[90,52,62,50],[90,54,62,52],[91,6,63,4,"families"],[91,14,63,12],[91,15,63,13,"add"],[91,18,63,16],[91,19,63,17,"fontMgr"],[91,26,63,24],[91,27,63,25,"getFamilyName"],[91,40,63,38],[91,41,63,39,"i"],[91,42,63,40],[91,43,63,41],[91,44,63,42],[92,4,64,2],[93,4,65,2],[93,11,65,9,"Array"],[93,16,65,14],[93,17,65,15,"from"],[93,21,65,19],[93,22,65,20,"families"],[93,30,65,28],[93,31,65,29],[94,2,66,0],[94,3,66,1],[95,2,67,0],[95,8,67,6,"loadTypefaces"],[95,21,67,19],[95,24,67,22,"typefacesToLoad"],[95,39,67,37],[95,43,67,41],[96,4,68,2],[96,10,68,8,"promises"],[96,18,68,16],[96,21,68,19,"Object"],[96,27,68,25],[96,28,68,26,"keys"],[96,32,68,30],[96,33,68,31,"typefacesToLoad"],[96,48,68,46],[96,49,68,47],[96,50,68,48,"flatMap"],[96,57,68,55],[96,58,68,56,"familyName"],[96,68,68,66],[96,72,68,70],[97,6,69,4],[97,13,69,11,"typefacesToLoad"],[97,28,69,26],[97,29,69,27,"familyName"],[97,39,69,37],[97,40,69,38],[97,41,69,39,"map"],[97,44,69,42],[97,45,69,43,"typefaceToLoad"],[97,59,69,57],[97,63,69,61],[98,8,70,6],[98,15,70,13,"Skia"],[98,20,70,17],[98,21,70,17,"Skia"],[98,25,70,17],[98,26,70,18,"Data"],[98,30,70,22],[98,31,70,23,"fromURI"],[98,38,70,30],[98,39,70,31,"Platform"],[98,48,70,39],[98,49,70,39,"Platform"],[98,57,70,39],[98,58,70,40,"resolveAsset"],[98,70,70,52],[98,71,70,53,"typefaceToLoad"],[98,85,70,67],[98,86,70,68],[98,87,70,69],[98,88,70,70,"then"],[98,92,70,74],[98,93,70,75,"data"],[98,97,70,79],[98,101,70,83],[99,10,71,8],[99,16,71,14,"tf"],[99,18,71,16],[99,21,71,19,"Skia"],[99,26,71,23],[99,27,71,23,"Skia"],[99,31,71,23],[99,32,71,24,"Typeface"],[99,40,71,32],[99,41,71,33,"MakeFreeTypeFaceFromData"],[99,65,71,57],[99,66,71,58,"data"],[99,70,71,62],[99,71,71,63],[100,10,72,8],[100,14,72,12,"tf"],[100,16,72,14],[100,21,72,19],[100,25,72,23],[100,27,72,25],[101,12,73,10],[101,18,73,16],[101,22,73,20,"Error"],[101,27,73,25],[101,28,73,26],[101,60,73,58,"familyName"],[101,70,73,68],[101,72,73,70],[101,73,73,71],[102,10,74,8],[103,10,75,8],[103,17,75,15],[103,18,75,16,"familyName"],[103,28,75,26],[103,30,75,28,"tf"],[103,32,75,30],[103,33,75,31],[104,8,76,6],[104,9,76,7],[104,10,76,8],[105,6,77,4],[105,7,77,5],[105,8,77,6],[106,4,78,2],[106,5,78,3],[106,6,78,4],[107,4,79,2],[107,11,79,9,"Promise"],[107,18,79,16],[107,19,79,17,"all"],[107,22,79,20],[107,23,79,21,"promises"],[107,31,79,29],[107,32,79,30],[108,2,80,0],[108,3,80,1],[109,2,81,7],[109,8,81,13,"useFonts"],[109,16,81,21],[109,19,81,24,"sources"],[109,26,81,31],[109,30,81,35],[110,4,82,2],[110,10,82,8],[110,11,82,9,"fontMgr"],[110,18,82,16],[110,20,82,18,"setFontMgr"],[110,30,82,28],[110,31,82,29],[110,34,82,32],[110,38,82,32,"useState"],[110,44,82,40],[110,45,82,40,"useState"],[110,53,82,40],[110,55,82,41],[110,59,82,45],[110,60,82,46],[111,4,83,2],[111,8,83,2,"useEffect"],[111,14,83,11],[111,15,83,11,"useEffect"],[111,24,83,11],[111,26,83,12],[111,32,83,18],[112,6,84,4,"loadTypefaces"],[112,19,84,17],[112,20,84,18,"sources"],[112,27,84,25],[112,28,84,26],[112,29,84,27,"then"],[112,33,84,31],[112,34,84,32,"result"],[112,40,84,38],[112,44,84,42],[113,8,85,6],[113,14,85,12,"fMgr"],[113,18,85,16],[113,21,85,19,"Skia"],[113,26,85,23],[113,27,85,23,"Skia"],[113,31,85,23],[113,32,85,24,"TypefaceFontProvider"],[113,52,85,44],[113,53,85,45,"Make"],[113,57,85,49],[113,58,85,50],[113,59,85,51],[114,8,86,6,"result"],[114,14,86,12],[114,15,86,13,"forEach"],[114,22,86,20],[114,23,86,21],[114,24,86,22],[114,25,86,23,"familyName"],[114,35,86,33],[114,37,86,35,"typeface"],[114,45,86,43],[114,46,86,44],[114,51,86,49],[115,10,87,8,"fMgr"],[115,14,87,12],[115,15,87,13,"registerFont"],[115,27,87,25],[115,28,87,26,"typeface"],[115,36,87,34],[115,38,87,36,"familyName"],[115,48,87,46],[115,49,87,47],[116,8,88,6],[116,9,88,7],[116,10,88,8],[117,8,89,6,"setFontMgr"],[117,18,89,16],[117,19,89,17,"fMgr"],[117,23,89,21],[117,24,89,22],[118,6,90,4],[118,7,90,5],[118,8,90,6],[119,6,91,4],[120,4,92,2],[120,5,92,3],[120,7,92,5],[120,9,92,7],[120,10,92,8],[121,4,93,2],[121,11,93,9,"fontMgr"],[121,18,93,16],[122,2,94,0],[122,3,94,1],[123,0,94,2],[123,3]],"functionMap":{"names":["<global>","useFont","useMemo$argument_0","slant","weight","matchFont","listFontFamilies","loadTypefaces","Object.keys.flatMap$argument_0","typefacesToLoad.familyName.map$argument_0","Skia.Data.fromURI.then$argument_0","useFonts","useEffect$argument_0","loadTypefaces.then$argument_0","result.forEach$argument_0"],"mappings":"AAA;uBCW;iBCE;GDM;CDC;cGO;CHQ;eIC;CJS;yBKC;CLY;gCMC;CNM;sBOC;wDCC;2CCC;2ECC;ODM;KDC;GDC;CPE;wBWC;YCE;gCCC;qBCE;ODE;KDE;GDE;CXE"},"hasCjsExports":false},"type":"js/module"}]}