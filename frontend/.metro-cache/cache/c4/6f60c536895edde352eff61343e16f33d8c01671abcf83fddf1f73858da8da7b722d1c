{"dependencies":[{"name":"./player","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":73},"end":{"line":4,"column":40,"index":113}}],"key":"3Vd5sLSB6p664Jg1PydyOIcN0Fs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.spawnHazards = spawnHazards;\n  exports.updateHazards = updateHazards;\n  exports.checkHazardCollisions = checkHazardCollisions;\n  exports.resetHazardSpawner = resetHazardSpawner;\n  var _player = require(_dependencyMap[0], \"./player\");\n  // Hazard system\n\n  let hazardIdCounter = 0;\n  let lastSpawnY = 0;\n  function spawnHazards(playerY, config, difficulty) {\n    const hazards = [];\n    const spawnDistance = playerY + config.screenHeight + 100;\n\n    // Spawn walls at intervals\n    if (spawnDistance - lastSpawnY > 200 / difficulty) {\n      lastSpawnY = spawnDistance;\n\n      // Random wall\n      if (Math.random() < 0.4) {\n        const isPhaseable = Math.random() < 0.5;\n        const wallWidth = 60 + Math.random() * 100;\n        hazards.push({\n          id: `hazard_${++hazardIdCounter}`,\n          position: {\n            x: Math.random() * (config.screenWidth - wallWidth),\n            y: spawnDistance\n          },\n          velocity: {\n            x: 0,\n            y: 0\n          },\n          radius: 0,\n          active: true,\n          type: 'wall',\n          phaseable: isPhaseable,\n          damage: 1,\n          width: wallWidth,\n          height: 20\n        });\n      }\n    }\n    return hazards;\n  }\n  function updateHazards(hazards, player, dt) {\n    hazards.forEach(hazard => {\n      if (!hazard.active) return;\n      switch (hazard.type) {\n        case 'drone':\n          // Chase player\n          if (hazard.speed) {\n            const dx = player.position.x - hazard.position.x;\n            const dy = player.position.y - hazard.position.y;\n            const dist = Math.sqrt(dx * dx + dy * dy);\n            if (dist > 0) {\n              hazard.velocity.x = dx / dist * hazard.speed;\n              hazard.velocity.y = dy / dist * hazard.speed;\n            }\n          }\n          break;\n        case 'laser':\n          if (hazard.telegraphed && hazard.telegraphTimer) {\n            hazard.telegraphTimer -= dt;\n          }\n          break;\n      }\n      hazard.position.x += hazard.velocity.x * dt;\n      hazard.position.y += hazard.velocity.y * dt;\n    });\n  }\n  function checkHazardCollisions(hazards, player, store) {\n    hazards.forEach(hazard => {\n      if (!hazard.active) return;\n\n      // Skip phaseable hazards when player is phasing\n      if (hazard.phaseable && player.phaseActive) return;\n      let collision = false;\n      switch (hazard.type) {\n        case 'wall':\n          // Rectangle collision\n          if (hazard.width && hazard.height) {\n            const closestX = Math.max(hazard.position.x, Math.min(player.position.x, hazard.position.x + hazard.width));\n            const closestY = Math.max(hazard.position.y, Math.min(player.position.y, hazard.position.y + hazard.height));\n            const dx = player.position.x - closestX;\n            const dy = player.position.y - closestY;\n            const dist = Math.sqrt(dx * dx + dy * dy);\n            collision = dist < player.radius;\n          }\n          break;\n        case 'drone':\n          const dx = hazard.position.x - player.position.x;\n          const dy = hazard.position.y - player.position.y;\n          collision = Math.sqrt(dx * dx + dy * dy) < player.radius + hazard.radius;\n          break;\n      }\n      if (collision) {\n        (0, _player.damagePlayer)(player, hazard.damage, store);\n      }\n    });\n  }\n  function resetHazardSpawner() {\n    lastSpawnY = 0;\n  }\n});","lineCount":109,"map":[[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"spawnHazards"],[7,22,9,0],[7,25,9,0,"spawnHazards"],[7,37,9,0],[8,2,43,0,"exports"],[8,9,43,0],[8,10,43,0,"updateHazards"],[8,23,43,0],[8,26,43,0,"updateHazards"],[8,39,43,0],[9,2,72,0,"exports"],[9,9,72,0],[9,10,72,0,"checkHazardCollisions"],[9,31,72,0],[9,34,72,0,"checkHazardCollisions"],[9,55,72,0],[10,2,108,0,"exports"],[10,9,108,0],[10,10,108,0,"resetHazardSpawner"],[10,28,108,0],[10,31,108,0,"resetHazardSpawner"],[10,49,108,0],[11,2,4,0],[11,6,4,0,"_player"],[11,13,4,0],[11,16,4,0,"require"],[11,23,4,0],[11,24,4,0,"_dependencyMap"],[11,38,4,0],[12,2,1,0],[14,2,6,0],[14,6,6,4,"hazardIdCounter"],[14,21,6,19],[14,24,6,22],[14,25,6,23],[15,2,7,0],[15,6,7,4,"lastSpawnY"],[15,16,7,14],[15,19,7,17],[15,20,7,18],[16,2,9,7],[16,11,9,16,"spawnHazards"],[16,23,9,28,"spawnHazards"],[16,24,9,29,"playerY"],[16,31,9,44],[16,33,9,46,"config"],[16,39,9,64],[16,41,9,66,"difficulty"],[16,51,9,84],[16,53,9,96],[17,4,10,2],[17,10,10,8,"hazards"],[17,17,10,25],[17,20,10,28],[17,22,10,30],[18,4,11,2],[18,10,11,8,"spawnDistance"],[18,23,11,21],[18,26,11,24,"playerY"],[18,33,11,31],[18,36,11,34,"config"],[18,42,11,40],[18,43,11,41,"screenHeight"],[18,55,11,53],[18,58,11,56],[18,61,11,59],[20,4,13,2],[21,4,14,2],[21,8,14,6,"spawnDistance"],[21,21,14,19],[21,24,14,22,"lastSpawnY"],[21,34,14,32],[21,37,14,35],[21,40,14,38],[21,43,14,41,"difficulty"],[21,53,14,51],[21,55,14,53],[22,6,15,4,"lastSpawnY"],[22,16,15,14],[22,19,15,17,"spawnDistance"],[22,32,15,30],[24,6,17,4],[25,6,18,4],[25,10,18,8,"Math"],[25,14,18,12],[25,15,18,13,"random"],[25,21,18,19],[25,22,18,20],[25,23,18,21],[25,26,18,24],[25,29,18,27],[25,31,18,29],[26,8,19,6],[26,14,19,12,"isPhaseable"],[26,25,19,23],[26,28,19,26,"Math"],[26,32,19,30],[26,33,19,31,"random"],[26,39,19,37],[26,40,19,38],[26,41,19,39],[26,44,19,42],[26,47,19,45],[27,8,20,6],[27,14,20,12,"wallWidth"],[27,23,20,21],[27,26,20,24],[27,28,20,26],[27,31,20,29,"Math"],[27,35,20,33],[27,36,20,34,"random"],[27,42,20,40],[27,43,20,41],[27,44,20,42],[27,47,20,45],[27,50,20,48],[28,8,22,6,"hazards"],[28,15,22,13],[28,16,22,14,"push"],[28,20,22,18],[28,21,22,19],[29,10,23,8,"id"],[29,12,23,10],[29,14,23,12],[29,24,23,22],[29,26,23,24,"hazardIdCounter"],[29,41,23,39],[29,43,23,41],[30,10,24,8,"position"],[30,18,24,16],[30,20,24,18],[31,12,25,10,"x"],[31,13,25,11],[31,15,25,13,"Math"],[31,19,25,17],[31,20,25,18,"random"],[31,26,25,24],[31,27,25,25],[31,28,25,26],[31,32,25,30,"config"],[31,38,25,36],[31,39,25,37,"screenWidth"],[31,50,25,48],[31,53,25,51,"wallWidth"],[31,62,25,60],[31,63,25,61],[32,12,26,10,"y"],[32,13,26,11],[32,15,26,13,"spawnDistance"],[33,10,27,8],[33,11,27,9],[34,10,28,8,"velocity"],[34,18,28,16],[34,20,28,18],[35,12,28,20,"x"],[35,13,28,21],[35,15,28,23],[35,16,28,24],[36,12,28,26,"y"],[36,13,28,27],[36,15,28,29],[37,10,28,31],[37,11,28,32],[38,10,29,8,"radius"],[38,16,29,14],[38,18,29,16],[38,19,29,17],[39,10,30,8,"active"],[39,16,30,14],[39,18,30,16],[39,22,30,20],[40,10,31,8,"type"],[40,14,31,12],[40,16,31,14],[40,22,31,20],[41,10,32,8,"phaseable"],[41,19,32,17],[41,21,32,19,"isPhaseable"],[41,32,32,30],[42,10,33,8,"damage"],[42,16,33,14],[42,18,33,16],[42,19,33,17],[43,10,34,8,"width"],[43,15,34,13],[43,17,34,15,"wallWidth"],[43,26,34,24],[44,10,35,8,"height"],[44,16,35,14],[44,18,35,16],[45,8,36,6],[45,9,36,7],[45,10,36,8],[46,6,37,4],[47,4,38,2],[48,4,40,2],[48,11,40,9,"hazards"],[48,18,40,16],[49,2,41,0],[50,2,43,7],[50,11,43,16,"updateHazards"],[50,24,43,29,"updateHazards"],[50,25,43,30,"hazards"],[50,32,43,47],[50,34,43,49,"player"],[50,40,43,63],[50,42,43,65,"dt"],[50,44,43,75],[50,46,43,77],[51,4,44,2,"hazards"],[51,11,44,9],[51,12,44,10,"forEach"],[51,19,44,17],[51,20,44,19,"hazard"],[51,26,44,25],[51,30,44,30],[52,6,45,4],[52,10,45,8],[52,11,45,9,"hazard"],[52,17,45,15],[52,18,45,16,"active"],[52,24,45,22],[52,26,45,24],[53,6,47,4],[53,14,47,12,"hazard"],[53,20,47,18],[53,21,47,19,"type"],[53,25,47,23],[54,8,48,6],[54,13,48,11],[54,20,48,18],[55,10,49,8],[56,10,50,8],[56,14,50,12,"hazard"],[56,20,50,18],[56,21,50,19,"speed"],[56,26,50,24],[56,28,50,26],[57,12,51,10],[57,18,51,16,"dx"],[57,20,51,18],[57,23,51,21,"player"],[57,29,51,27],[57,30,51,28,"position"],[57,38,51,36],[57,39,51,37,"x"],[57,40,51,38],[57,43,51,41,"hazard"],[57,49,51,47],[57,50,51,48,"position"],[57,58,51,56],[57,59,51,57,"x"],[57,60,51,58],[58,12,52,10],[58,18,52,16,"dy"],[58,20,52,18],[58,23,52,21,"player"],[58,29,52,27],[58,30,52,28,"position"],[58,38,52,36],[58,39,52,37,"y"],[58,40,52,38],[58,43,52,41,"hazard"],[58,49,52,47],[58,50,52,48,"position"],[58,58,52,56],[58,59,52,57,"y"],[58,60,52,58],[59,12,53,10],[59,18,53,16,"dist"],[59,22,53,20],[59,25,53,23,"Math"],[59,29,53,27],[59,30,53,28,"sqrt"],[59,34,53,32],[59,35,53,33,"dx"],[59,37,53,35],[59,40,53,38,"dx"],[59,42,53,40],[59,45,53,43,"dy"],[59,47,53,45],[59,50,53,48,"dy"],[59,52,53,50],[59,53,53,51],[60,12,54,10],[60,16,54,14,"dist"],[60,20,54,18],[60,23,54,21],[60,24,54,22],[60,26,54,24],[61,14,55,12,"hazard"],[61,20,55,18],[61,21,55,19,"velocity"],[61,29,55,27],[61,30,55,28,"x"],[61,31,55,29],[61,34,55,33,"dx"],[61,36,55,35],[61,39,55,38,"dist"],[61,43,55,42],[61,46,55,46,"hazard"],[61,52,55,52],[61,53,55,53,"speed"],[61,58,55,58],[62,14,56,12,"hazard"],[62,20,56,18],[62,21,56,19,"velocity"],[62,29,56,27],[62,30,56,28,"y"],[62,31,56,29],[62,34,56,33,"dy"],[62,36,56,35],[62,39,56,38,"dist"],[62,43,56,42],[62,46,56,46,"hazard"],[62,52,56,52],[62,53,56,53,"speed"],[62,58,56,58],[63,12,57,10],[64,10,58,8],[65,10,59,8],[66,8,60,6],[66,13,60,11],[66,20,60,18],[67,10,61,8],[67,14,61,12,"hazard"],[67,20,61,18],[67,21,61,19,"telegraphed"],[67,32,61,30],[67,36,61,34,"hazard"],[67,42,61,40],[67,43,61,41,"telegraphTimer"],[67,57,61,55],[67,59,61,57],[68,12,62,10,"hazard"],[68,18,62,16],[68,19,62,17,"telegraphTimer"],[68,33,62,31],[68,37,62,35,"dt"],[68,39,62,37],[69,10,63,8],[70,10,64,8],[71,6,65,4],[72,6,67,4,"hazard"],[72,12,67,10],[72,13,67,11,"position"],[72,21,67,19],[72,22,67,20,"x"],[72,23,67,21],[72,27,67,25,"hazard"],[72,33,67,31],[72,34,67,32,"velocity"],[72,42,67,40],[72,43,67,41,"x"],[72,44,67,42],[72,47,67,45,"dt"],[72,49,67,47],[73,6,68,4,"hazard"],[73,12,68,10],[73,13,68,11,"position"],[73,21,68,19],[73,22,68,20,"y"],[73,23,68,21],[73,27,68,25,"hazard"],[73,33,68,31],[73,34,68,32,"velocity"],[73,42,68,40],[73,43,68,41,"y"],[73,44,68,42],[73,47,68,45,"dt"],[73,49,68,47],[74,4,69,2],[74,5,69,3],[74,6,69,4],[75,2,70,0],[76,2,72,7],[76,11,72,16,"checkHazardCollisions"],[76,32,72,37,"checkHazardCollisions"],[76,33,72,38,"hazards"],[76,40,72,55],[76,42,72,57,"player"],[76,48,72,71],[76,50,72,73,"store"],[76,55,72,83],[76,57,72,85],[77,4,73,2,"hazards"],[77,11,73,9],[77,12,73,10,"forEach"],[77,19,73,17],[77,20,73,19,"hazard"],[77,26,73,25],[77,30,73,30],[78,6,74,4],[78,10,74,8],[78,11,74,9,"hazard"],[78,17,74,15],[78,18,74,16,"active"],[78,24,74,22],[78,26,74,24],[80,6,76,4],[81,6,77,4],[81,10,77,8,"hazard"],[81,16,77,14],[81,17,77,15,"phaseable"],[81,26,77,24],[81,30,77,28,"player"],[81,36,77,34],[81,37,77,35,"phaseActive"],[81,48,77,46],[81,50,77,48],[82,6,79,4],[82,10,79,8,"collision"],[82,19,79,17],[82,22,79,20],[82,27,79,25],[83,6,81,4],[83,14,81,12,"hazard"],[83,20,81,18],[83,21,81,19,"type"],[83,25,81,23],[84,8,82,6],[84,13,82,11],[84,19,82,17],[85,10,83,8],[86,10,84,8],[86,14,84,12,"hazard"],[86,20,84,18],[86,21,84,19,"width"],[86,26,84,24],[86,30,84,28,"hazard"],[86,36,84,34],[86,37,84,35,"height"],[86,43,84,41],[86,45,84,43],[87,12,85,10],[87,18,85,16,"closestX"],[87,26,85,24],[87,29,85,27,"Math"],[87,33,85,31],[87,34,85,32,"max"],[87,37,85,35],[87,38,85,36,"hazard"],[87,44,85,42],[87,45,85,43,"position"],[87,53,85,51],[87,54,85,52,"x"],[87,55,85,53],[87,57,85,55,"Math"],[87,61,85,59],[87,62,85,60,"min"],[87,65,85,63],[87,66,85,64,"player"],[87,72,85,70],[87,73,85,71,"position"],[87,81,85,79],[87,82,85,80,"x"],[87,83,85,81],[87,85,85,83,"hazard"],[87,91,85,89],[87,92,85,90,"position"],[87,100,85,98],[87,101,85,99,"x"],[87,102,85,100],[87,105,85,103,"hazard"],[87,111,85,109],[87,112,85,110,"width"],[87,117,85,115],[87,118,85,116],[87,119,85,117],[88,12,86,10],[88,18,86,16,"closestY"],[88,26,86,24],[88,29,86,27,"Math"],[88,33,86,31],[88,34,86,32,"max"],[88,37,86,35],[88,38,86,36,"hazard"],[88,44,86,42],[88,45,86,43,"position"],[88,53,86,51],[88,54,86,52,"y"],[88,55,86,53],[88,57,86,55,"Math"],[88,61,86,59],[88,62,86,60,"min"],[88,65,86,63],[88,66,86,64,"player"],[88,72,86,70],[88,73,86,71,"position"],[88,81,86,79],[88,82,86,80,"y"],[88,83,86,81],[88,85,86,83,"hazard"],[88,91,86,89],[88,92,86,90,"position"],[88,100,86,98],[88,101,86,99,"y"],[88,102,86,100],[88,105,86,103,"hazard"],[88,111,86,109],[88,112,86,110,"height"],[88,118,86,116],[88,119,86,117],[88,120,86,118],[89,12,88,10],[89,18,88,16,"dx"],[89,20,88,18],[89,23,88,21,"player"],[89,29,88,27],[89,30,88,28,"position"],[89,38,88,36],[89,39,88,37,"x"],[89,40,88,38],[89,43,88,41,"closestX"],[89,51,88,49],[90,12,89,10],[90,18,89,16,"dy"],[90,20,89,18],[90,23,89,21,"player"],[90,29,89,27],[90,30,89,28,"position"],[90,38,89,36],[90,39,89,37,"y"],[90,40,89,38],[90,43,89,41,"closestY"],[90,51,89,49],[91,12,90,10],[91,18,90,16,"dist"],[91,22,90,20],[91,25,90,23,"Math"],[91,29,90,27],[91,30,90,28,"sqrt"],[91,34,90,32],[91,35,90,33,"dx"],[91,37,90,35],[91,40,90,38,"dx"],[91,42,90,40],[91,45,90,43,"dy"],[91,47,90,45],[91,50,90,48,"dy"],[91,52,90,50],[91,53,90,51],[92,12,92,10,"collision"],[92,21,92,19],[92,24,92,22,"dist"],[92,28,92,26],[92,31,92,29,"player"],[92,37,92,35],[92,38,92,36,"radius"],[92,44,92,42],[93,10,93,8],[94,10,94,8],[95,8,95,6],[95,13,95,11],[95,20,95,18],[96,10,96,8],[96,16,96,14,"dx"],[96,18,96,16],[96,21,96,19,"hazard"],[96,27,96,25],[96,28,96,26,"position"],[96,36,96,34],[96,37,96,35,"x"],[96,38,96,36],[96,41,96,39,"player"],[96,47,96,45],[96,48,96,46,"position"],[96,56,96,54],[96,57,96,55,"x"],[96,58,96,56],[97,10,97,8],[97,16,97,14,"dy"],[97,18,97,16],[97,21,97,19,"hazard"],[97,27,97,25],[97,28,97,26,"position"],[97,36,97,34],[97,37,97,35,"y"],[97,38,97,36],[97,41,97,39,"player"],[97,47,97,45],[97,48,97,46,"position"],[97,56,97,54],[97,57,97,55,"y"],[97,58,97,56],[98,10,98,8,"collision"],[98,19,98,17],[98,22,98,20,"Math"],[98,26,98,24],[98,27,98,25,"sqrt"],[98,31,98,29],[98,32,98,30,"dx"],[98,34,98,32],[98,37,98,35,"dx"],[98,39,98,37],[98,42,98,40,"dy"],[98,44,98,42],[98,47,98,45,"dy"],[98,49,98,47],[98,50,98,48],[98,53,98,51,"player"],[98,59,98,57],[98,60,98,58,"radius"],[98,66,98,64],[98,69,98,67,"hazard"],[98,75,98,73],[98,76,98,74,"radius"],[98,82,98,80],[99,10,99,8],[100,6,100,4],[101,6,102,4],[101,10,102,8,"collision"],[101,19,102,17],[101,21,102,19],[102,8,103,6],[102,12,103,6,"damagePlayer"],[102,19,103,18],[102,20,103,18,"damagePlayer"],[102,32,103,18],[102,34,103,19,"player"],[102,40,103,25],[102,42,103,27,"hazard"],[102,48,103,33],[102,49,103,34,"damage"],[102,55,103,40],[102,57,103,42,"store"],[102,62,103,47],[102,63,103,48],[103,6,104,4],[104,4,105,2],[104,5,105,3],[104,6,105,4],[105,2,106,0],[106,2,108,7],[106,11,108,16,"resetHazardSpawner"],[106,29,108,34,"resetHazardSpawner"],[106,30,108,34],[106,32,108,37],[107,4,109,2,"lastSpawnY"],[107,14,109,12],[107,17,109,15],[107,18,109,16],[108,2,110,0],[109,0,110,1],[109,3]],"functionMap":{"names":["<global>","spawnHazards","updateHazards","forEach$argument_0","checkHazardCollisions","resetHazardSpawner"],"mappings":"AAA;OCQ;CDgC;OEE;kBCC;GDyB;CFC;OIE;kBDC;GCgC;CJC;OKE;CLE"},"hasCjsExports":false},"type":"js/module"}]}